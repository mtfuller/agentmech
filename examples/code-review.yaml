name: "Code Review Assistant"
description: "A workflow that helps review code with different strategies"
default_model: "llama2"

start_state: "choose_review_type"

states:
  choose_review_type:
    type: "choice"
    prompt: "What type of code review would you like?"
    save_as: "review_type"
    choices:
      - label: "Security Review"
        value: "security"
        next: "security_review"
      - label: "Performance Review"
        value: "performance"
        next: "performance_review"
      - label: "Best Practices Review"
        value: "best_practices"
        next: "best_practices_review"
  
  security_review:
    type: "prompt"
    prompt: "Review the following code for security vulnerabilities and provide recommendations: function login(username, password) { return fetch('/api/login?user=' + username + '&pass=' + password); }"
    save_as: "review_result"
    next: "ask_another"
  
  performance_review:
    type: "prompt"
    prompt: "Review the following code for performance issues: function findUser(users, id) { for(let i=0; i<users.length; i++) { for(let j=0; j<users.length; j++) { if(users[i].id === id) return users[i]; } } }"
    save_as: "review_result"
    next: "ask_another"
  
  best_practices_review:
    type: "prompt"
    prompt: "Review the following code for best practices: var x = 5; function calc() { return x * x; } var y = calc();"
    save_as: "review_result"
    next: "ask_another"
  
  ask_another:
    type: "choice"
    prompt: "Would you like to perform another review?"
    choices:
      - label: "Yes"
        value: "yes"
        next: "choose_review_type"
      - label: "No"
        value: "no"
        next: "end"
  
  end:
    type: "end"

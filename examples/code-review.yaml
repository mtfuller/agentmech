name: "Code Review Assistant"
description: "A workflow that helps review code with different strategies"
default_model: "gemma3:4b"

start_state: "choose_review_type"

states:
  choose_review_type:
    type: "input"
    prompt: "What type of code review would you like? (security, performance, best_practices)"
    save_as: "review_type"
    next: "security_review"
  
  security_review:
    type: "prompt"
    prompt: "Review the following code for security vulnerabilities and provide recommendations: function login(username, password) { return fetch('/api/login?user=' + username + '&pass=' + password); }"
    save_as: "review_result"
    next: "ask_another"
  
  performance_review:
    type: "prompt"
    prompt: "Review the following code for performance issues: function findUser(users, id) { for(let i=0; i<users.length; i++) { for(let j=0; j<users.length; j++) { if(users[i].id === id) return users[i]; } } }"
    save_as: "review_result"
    next: "ask_another"
  
  best_practices_review:
    type: "prompt"
    prompt: "Review the following code for best practices: var x = 5; function calc() { return x * x; } var y = calc();"
    save_as: "review_result"
    next: "ask_another"
  
  ask_another:
    type: "input"
    prompt: "Would you like to perform another review? (yes/no)"
    save_as: "continue_answer"
    next: "end"
  
  end:
    type: "end"

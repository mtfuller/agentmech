name: "Web Browsing with MCP"
description: "Demonstrates web browsing capabilities using the Playwright MCP server to navigate websites, extract information, and interact with web pages"
default_model: "gemma3:4b"
start_state: "choose_task"

# Configure the Playwright MCP server for browser automation
# Note: This requires the playwright MCP server to be installed
# Installation: npx -y @modelcontextprotocol/server-playwright
mcp_servers:
  browser:
    type: npx
    package: "@modelcontextprotocol/server-playwright"

states:
  choose_task:
    type: "input"
    prompt: |
      What would you like to do with web browsing?
      
      Options:
      - search: Search for information on a website
      - extract: Extract specific information from a URL
      - navigate: Navigate to a website and describe what you see
      - custom: Provide a custom web browsing task
    save_as: "task_choice"
    next: "route_task"
  
  route_task:
    type: "prompt"
    prompt: |
      User wants to: {{task_choice}}
      
      Based on the user's choice, determine which web browsing task to perform.
    next_options:
      - state: "search_demo"
        description: "User wants to search for information"
      - state: "extract_demo"
        description: "User wants to extract information from a URL"
      - state: "navigate_demo"
        description: "User wants to navigate and explore a website"
      - state: "custom_task"
        description: "User has a custom web browsing task"
  
  # Demo 1: Search for information on a website
  search_demo:
    type: "input"
    prompt: |
      What would you like to search for on the web?
      (Example: "latest news about AI" or "weather in San Francisco")
    save_as: "search_query"
    next: "perform_search"
  
  perform_search:
    type: "prompt"
    prompt: |
      Navigate to a search engine (like DuckDuckGo at https://duckduckgo.com) and search for: {{search_query}}
      
      Please:
      1. Open the search engine website
      2. Enter the search query: "{{search_query}}"
      3. Get the search results
      4. Summarize the top 3-5 most relevant results
      
      Provide a concise summary of what you found.
    mcp_servers: ["browser"]
    save_as: "search_results"
    next: "display_results"
  
  # Demo 2: Extract information from a specific URL
  extract_demo:
    type: "input"
    prompt: |
      Enter the URL you want to extract information from:
      (Example: https://example.com or https://news.ycombinator.com)
    save_as: "target_url"
    next: "perform_extraction"
  
  perform_extraction:
    type: "prompt"
    prompt: |
      Navigate to {{target_url}} and extract useful information.
      
      Please:
      1. Open the URL: {{target_url}}
      2. Analyze the page content
      3. Extract the main headings, key information, and important details
      4. Provide a structured summary of what you found
    mcp_servers: ["browser"]
    save_as: "extracted_info"
    next: "display_results"
  
  # Demo 3: Navigate and explore a website
  navigate_demo:
    type: "input"
    prompt: |
      Enter a website URL to explore:
      (Example: https://github.com or https://wikipedia.org)
    save_as: "website_url"
    next: "perform_navigation"
  
  perform_navigation:
    type: "prompt"
    prompt: |
      Navigate to {{website_url}} and explore the website.
      
      Please:
      1. Open {{website_url}}
      2. Describe what you see on the homepage
      3. Identify the main sections and navigation elements
      4. Take note of any interesting features or content
      5. Provide a comprehensive overview of the website
    mcp_servers: ["browser"]
    save_as: "navigation_report"
    next: "display_results"
  
  # Demo 4: Custom web browsing task
  custom_task:
    type: "input"
    prompt: |
      Describe what you want to do with web browsing:
      (Be specific about the website, actions, and information you need)
    save_as: "custom_instructions"
    next: "perform_custom"
  
  perform_custom:
    type: "prompt"
    prompt: |
      {{custom_instructions}}
      
      Use the browser automation tools available to complete this task.
      Provide detailed results of what you accomplished.
    mcp_servers: ["browser"]
    save_as: "custom_results"
    next: "display_results"
  
  # Display results and ask if user wants to continue
  display_results:
    type: "prompt"
    prompt: |
      Here are the results from the web browsing task:
      
      Search Results: {{search_results}}
      Extracted Info: {{extracted_info}}
      Navigation Report: {{navigation_report}}
      Custom Results: {{custom_results}}
      
      Summarize the key findings from whichever task was performed.
    save_as: "summary"
    next: "ask_continue"
  
  ask_continue:
    type: "input"
    prompt: |
      Would you like to perform another web browsing task? (yes/no)
    save_as: "continue_choice"
    next: "check_continue"
  
  check_continue:
    type: "prompt"
    prompt: |
      User answered: {{continue_choice}}
      
      Should we continue with another task or end the workflow?
    next_options:
      - state: "choose_task"
        description: "User wants to continue with another task"
      - state: "end"
        description: "User wants to end the workflow"
